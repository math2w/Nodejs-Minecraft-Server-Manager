<html>
    <head>
        <title>Soon to be...</title>
        <link rel="stylesheet" href="/public/css/main.css">
    </head>

    <center><main>
        <div style="width: 20%; height: 500px; margin-top: 7.5%;">
        <p>Minecraft Server Manager</p>
        <div hidden="true" id="errordiv" style="background-color: darkred; width: 62%; height: 3%; position: absolute; left: 50%; top: 23%; transform: translate(-50%, -50%);">
            <p id="errormsg" style="font-size: 18px; margin-top: -2%;">error</p>
        </div>
        <section style="margin-top: 22%;">
        <section style="margin-bottom: 5%;">

        <label style="font-size: 18px; margin-right: 55%;" for="username">Username</label><br>  
        <input class="blurdiv2" id="username" type="text" style="width: 80%; height: 40px; margin-top: 2%; color: white; font-size: 24px;"><br>
    </section >
        <section style="margin-bottom: 5%;">
        <label style="font-size: 18px; margin-right: 55%;" for="password">Password</label><br>  
        <input class="blurdiv2" id="password" type="text" style="width: 80%; margin-top: 2%; height: 40px; color: white; font-size: 24px;"><br>
    </section>
    </section>

    <button id="login" style="height: 20%; margin-top: 7%; background-color: hsla(216, 90%, 54%, 0.8);">Log in</button>
        </div>

    </main></center>

</html>

<body>
    
</body>

<script src=
"https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    </script>

<script type="module">
    import { getCookie, delete_cookie } from "/public/usefulFunctions.js";
        $(document).ready(()=>{
            $.getJSON("https://api.ipify.org?format=json",
            function (data) {

                // Displayin IP address on screen
                console.log(data.ip);
            })
        });

        const username = getCookie("username");
        const password = getCookie("password");
        fetch(`/dashboardlogin?username=${encodeURIComponent(username)}&password=${encodeURIComponent(password)}`)
       .then(response => {


        console.log(response);
        if (response.ok) {
        // recieve respone from server
        
        } else if (!response.ok) {
            delete_cookie("username");
            delete_cookie("password");
            window.location.href = "public/html/index.html";
            return;
        }
    }).catch(e => {
        console.error(e);
    })

        
      // window.location.href = '/download?url=' + encodeURIComponent(videoUrl);

        
</script>